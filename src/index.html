<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>florecer</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div id="auth-container">
        <div id="login-form" class="auth-form">
            <h2>Iniciar sesión</h2>
            <form>
                <label for="login-user">Usuario o Email:</label>
                <input type="text" id="login-user" required>
                <label for="login-password">Contraseña:</label>
                <input type="password" id="login-password" required>
                <label style="display:flex;align-items:center;margin-top:1rem;">
                    <input type="checkbox" id="keep-logged" style="margin-right:0.5rem;"> Mantener sesión iniciada
                </label>
                <button type="submit">Entrar</button>
            </form>
            <p>¿No tienes cuenta? <a href="#" id="show-register">Regístrate</a></p>
            <p id="login-error" style="color:red;display:none;"></p>
        </div>
        <div id="register-form" class="auth-form" style="display:none">
            <h2>Registrarse</h2>
            <form>
                <label for="register-nombre">Nombre:</label>
                <input type="text" id="register-nombre" required>
                <label for="register-apellidos">Apellidos:</label>
                <input type="text" id="register-apellidos" required>
                <label for="register-user">Usuario:</label>
                <input type="text" id="register-user" required>
                <label for="register-email">Email:</label>
                <input type="email" id="register-email" required>
                <label for="register-password">Contraseña:</label>
                <input type="password" id="register-password" required>
                <label for="register-password2">Verificar contraseña:</label>
                <input type="password" id="register-password2" required>
                <button type="submit" id="continuar-btn" style="display:flex;align-items:center;gap:0.5rem;justify-content:center;">
                    Continuar <span style="font-size:1.3em;">&#8594;</span>
                </button>
            </form>
            <p>¿Ya tienes cuenta? <a href="#" id="show-login">Inicia sesión</a></p>
            <p id="register-error" style="color:red;display:none;"></p>
        </div>
    </div>
    <div id="personaliza-panel" class="auth-form" style="display:none">
        <h2>Personaliza tu experiencia</h2>
        <form>
            <h3>Nutrición</h3>
            <label><input type="checkbox" name="nutricion" value="deficiencias"> Deficiencias nutricionales</label><br>
            <label><input type="checkbox" name="nutricion" value="sobrepeso"> Sobrepeso u obesidad</label><br>
            <label><input type="checkbox" name="nutricion" value="desnutricion"> Desnutrición</label><br>
            <label><input type="checkbox" name="nutricion" value="alergias"> Alergias alimentarias</label><br>
            <label><input type="checkbox" name="nutricion" value="intolerancias"> Intolerancias alimentarias</label><br>
            <label><input type="checkbox" name="nutricion" value="deshidratacion"> Deshidratación</label><br>
            <label><input type="checkbox" name="nutricion" value="digestivos"> Problemas de digestión</label><br>
            <h3>Cabello</h3>
            <label><input type="checkbox" name="cabello" value="caida"> Caída del cabello</label><br>
            <label><input type="checkbox" name="cabello" value="seco"> Cabello seco y quebradizo</label><br>
            <label><input type="checkbox" name="cabello" value="grasoso"> Cabello grasoso</label><br>
            <label><input type="checkbox" name="cabello" value="caspa"> Caspa</label><br>
            <label><input type="checkbox" name="cabello" value="calor"> Cabello dañado por el calor</label><br>
            <label><input type="checkbox" name="cabello" value="tenido"> Cabello teñido o decolorado</label><br>
            <label><input type="checkbox" name="cabello" value="encrespado"> Cabello encrespado</label><br>
            <label><input type="checkbox" name="cabello" value="alopecia"> Alopecia</label><br>
            <h3>Piel</h3>
            <label><input type="checkbox" name="piel" value="acne"> Acné</label><br>
            <label><input type="checkbox" name="piel" value="seca"> Piel seca</label><br>
            <label><input type="checkbox" name="piel" value="grasosa"> Piel grasosa</label><br>
            <label><input type="checkbox" name="piel" value="hiperpigmentacion"> Hiperpigmentación</label><br>
            <label><input type="checkbox" name="piel" value="arrugas"> Arrugas y líneas finas</label><br>
            <label><input type="checkbox" name="piel" value="sensibilidad"> Sensibilidad en la piel</label><br>
            <label><input type="checkbox" name="piel" value="eccema"> Eccema</label><br>
            <label><input type="checkbox" name="piel" value="rosacea"> Rosácea</label><br>
            <h4>Tipos de piel</h4>
            <label><input type="radio" name="tipo_piel" value="normal"> Normal</label>
            <label><input type="radio" name="tipo_piel" value="seca"> Seca</label>
            <label><input type="radio" name="tipo_piel" value="grasosa"> Grasosa</label>
            <label><input type="radio" name="tipo_piel" value="mixta"> Mixta</label>
            <label><input type="radio" name="tipo_piel" value="sensible"> Sensible</label>
            <br>
            <button type="submit">Guardar y continuar</button>
        </form>
    </div>
    <div id="main-content" style="display:none">
        <header>
            <h1>florecer</h1>
            <nav class="main-nav">
                <ul>
                    <li class="menu-dropdown">
                        <button id="menuBtn">Menú</button>
                    </li>
                    <li class="frase"><span style="font-style: italic; color: #fff;">Vive tu vida</span></li>
                    <li><button class="side-link" data-section="tienda">Tienda</button></li>
                    <li><button class="side-link" data-section="carrito">Carrito</button></li>
                </ul>
            </nav>
        </header>
        <aside id="sideMenu" class="side-menu">
            <ul>
                <li><button class="side-link" data-section="inicio">Inicio</button></li>
                <li><button class="side-link" data-section="perfil">Perfil</button></li>
                <li><button class="side-link" data-section="buscador">Buscador</button></li>
                <li><button class="side-link" data-section="configuracion">Configuración</button></li>
            </ul>
        </aside>
        <main>
            <section id="inicio" class="main-section">
                <h2 id="bienvenida-usuario">Inicio</h2>
                <div class="feed">
                    <article class="post">
                        <img src="https://images.unsplash.com/photo-1506744038136-46273834b3fb?auto=format&fit=crop&w=400&q=80" alt="Bienestar" />
                        <div>
                            <h3>¡Cuida tu mente y cuerpo!</h3>
                            <p>Descubre rutinas diarias para sentirte mejor cada día.</p>
                        </div>
                    </article>
                </div>
            </section>
            <!-- Nutrición -->
            <section id="nutricion-deficiencias" class="main-section" style="display:none">
                <h2>Deficiencias nutricionales</h2>
                <ul>
                    <li>Problema: Falta de nutrientes esenciales como vitaminas, minerales o proteínas.</li>
                    <li>Solución: Dieta equilibrada, suplementos bajo supervisión, consulta con nutricionista.</li>
                    <li>Productos: Suplementos vitamínicos ($5-$20), alimentos fortificados ($5-$15), Ensure ($20-$100).</li>
                    <li>Marcas: Centrum, Nature's Bounty, Garden of Life, Ensure.</li>
                </ul>
            </section>
            <section id="nutricion-sobrepeso" class="main-section" style="display:none">
                <h2>Sobrepeso u obesidad</h2>
                <ul>
                    <li>Problema: Exceso de peso que puede aumentar el riesgo de enfermedades crónicas.</li>
                    <li>Solución: Dieta saludable, actividad física, metas realistas, consulta profesional.</li>
                    <li>Productos: Suplementos de fibra/proteínas ($10-$50), snacks saludables ($5-$10).</li>
                    <li>Marcas: Herbalife, SlimFast, Ensure, Nature's Bounty.</li>
                </ul>
            </section>
            <section id="nutricion-desnutricion" class="main-section" style="display:none">
                <h2>Desnutrición</h2>
                <ul>
                    <li>Problema: Falta de nutrientes esenciales que puede afectar la salud y el bienestar.</li>
                    <li>Solución: Dieta rica en nutrientes, suplementos, atención médica si es severa.</li>
                    <li>Productos: Suplementos nutricionales ($10-$30), alimentos ricos en nutrientes ($5-$15), Ensure ($20-$100).</li>
                    <li>Marcas: Ensure, Boost, Pediasure, Resource.</li>
                </ul>
            </section>
            <section id="nutricion-alergias" class="main-section" style="display:none">
                <h2>Alergias alimentarias</h2>
                <ul>
                    <li>Problema: Reacciones adversas a ciertos alimentos.</li>
                    <li>Solución: Identificar y evitar alimentos, leer etiquetas, consulta con alergólogo.</li>
                    <li>Productos: Alimentos libres de alérgenos ($5-$15), suplementos nutricionales ($10-$30).</li>
                    <li>Marcas: Enjoy Life Foods, Udi's, Glutino, Bob's Red Mill.</li>
                </ul>
            </section>
            <section id="nutricion-intolerancias" class="main-section" style="display:none">
                <h2>Intolerancias alimentarias</h2>
                <ul>
                    <li>Problema: Dificultad para digerir ciertos alimentos.</li>
                    <li>Solución: Identificar y evitar alimentos, dieta de eliminación, suplementos enzimáticos.</li>
                    <li>Productos: Alimentos sin lactosa/gluten ($5-$15), suplementos enzimáticos ($10-$30).</li>
                    <li>Marcas: Lactaid, Gluten-Free Pantry, So Delicious, Enjoy Life Foods.</li>
                </ul>
            </section>
            <section id="nutricion-deshidratacion" class="main-section" style="display:none">
                <h2>Deshidratación</h2>
                <ul>
                    <li>Problema: Falta de líquidos en el cuerpo.</li>
                    <li>Solución: Beber suficiente agua, evitar alcohol/cafeína, alimentos hidratantes.</li>
                    <li>Productos: Bebidas hidratantes ($1-$5), suplementos de electrolitos ($10-$20).</li>
                    <li>Marcas: Gatorade, Powerade, Nuun, Coconut Water.</li>
                </ul>
            </section>
            <section id="nutricion-digestivos" class="main-section" style="display:none">
                <h2>Problemas de digestión</h2>
                <ul>
                    <li>Problema: Estreñimiento, diarrea o dolor abdominal.</li>
                    <li>Solución: Dieta rica en fibra, agua, evitar alimentos desencadenantes.</li>
                    <li>Productos: Probióticos ($10-$30), suplementos de fibra ($5-$15).</li>
                    <li>Marcas: Garden of Life, Nature's Bounty, Align, Benefiber.</li>
                </ul>
            </section>
            <!-- Cabello -->
            <section id="cabello-caida" class="main-section" style="display:none">
                <h2>Caída del cabello</h2>
                <ul>
                    <li>Problema: Pérdida excesiva de cabello por estrés, genética o deficiencias.</li>
                    <li>Solución: Dieta equilibrada, reducir estrés, productos estimulantes, consulta especialista.</li>
                    <li>Productos: Champús con biotina/keratina ($10-$30), minoxidil ($20-$50), suplementos ($15-$30).</li>
                    <li>Marcas: Nioxin, Rogaine, Pantene, Kerastase.</li>
                </ul>
            </section>
            <section id="cabello-seco" class="main-section" style="display:none">
                <h2>Cabello seco y quebradizo</h2>
                <ul>
                    <li>Problema: Falta de humedad y nutrientes, puntas abiertas.</li>
                    <li>Solución: Mascarillas hidratantes, reducir calor, productos nutritivos.</li>
                    <li>Productos: Mascarillas hidratantes ($10-$25), champús/acondicionadores suaves ($8-$20).</li>
                    <li>Marcas: Moroccanoil, Kerastase, L'Oréal Paris, Aveda.</li>
                </ul>
            </section>
            <section id="cabello-grasoso" class="main-section" style="display:none">
                <h2>Cabello grasoso</h2>
                <ul>
                    <li>Problema: Exceso de sebo, cabello pesado.</li>
                    <li>Solución: Lavar con productos específicos, evitar productos grasos.</li>
                    <li>Productos: Champús para cabello grasoso ($8-$15), productos con té de árbol ($10-$20).</li>
                    <li>Marcas: Pantene, Head & Shoulders, Garnier, Bumble and bumble.</li>
                </ul>
            </section>
            <section id="cabello-caspa" class="main-section" style="display:none">
                <h2>Caspa</h2>
                <ul>
                    <li>Problema: Descamación y picazón en el cuero cabelludo.</li>
                    <li>Solución: Champús anticaspa, reducir estrés, evitar irritantes.</li>
                    <li>Productos: Champús anticaspa ($10-$20), productos con aceite de té de árbol ($10-$25).</li>
                    <li>Marcas: Head & Shoulders, Nizoral, Paul Mitchell, Selsun Blue.</li>
                </ul>
            </section>
            <section id="cabello-calor" class="main-section" style="display:none">
                <h2>Cabello dañado por el calor</h2>
                <ul>
                    <li>Problema: Daño por uso excesivo de calor.</li>
                    <li>Solución: Reducir calor, productos protectores, tratamientos reparadores.</li>
                    <li>Productos: Sprays termo protectores ($10-$20), mascarillas hidratantes ($10-$25).</li>
                    <li>Marcas: Moroccanoil, Bumble and bumble, Redken, Aveda.</li>
                </ul>
            </section>
            <section id="cabello-tenido" class="main-section" style="display:none">
                <h2>Cabello teñido o decolorado</h2>
                <ul>
                    <li>Problema: Pérdida de color o daño por decoloración.</li>
                    <li>Solución: Productos específicos, evitar lavados frecuentes, tratamientos hidratantes.</li>
                    <li>Productos: Productos para cabello teñido ($10-$25), champús/acondicionadores suaves ($8-$20).</li>
                    <li>Marcas: L'Oréal Paris, Wella, Redken, Joico.</li>
                </ul>
            </section>
            <section id="cabello-encrespado" class="main-section" style="display:none">
                <h2>Cabello encrespado</h2>
                <ul>
                    <li>Problema: Cabello frizzy por humedad o daño.</li>
                    <li>Solución: Productos hidratantes, anti-frizz, cortar puntas abiertas.</li>
                    <li>Productos: Aceite de argán/coco ($10-$25), champús/acondicionadores suaves ($8-$20).</li>
                    <li>Marcas: Moroccanoil, Kerastase, Aveda, Bumble and bumble.</li>
                </ul>
            </section>
            <section id="cabello-alopecia" class="main-section" style="display:none">
                <h2>Alopecia</h2>
                <ul>
                    <li>Problema: Pérdida de cabello en áreas específicas.</li>
                    <li>Solución: Consulta especialista, tratamientos médicos, productos estimulantes.</li>
                    <li>Productos: Minoxidil ($20-$50), tratamientos capilares ($15-$30).</li>
                    <li>Marcas: Rogaine, Nioxin, Kerastase.</li>
                </ul>
            </section>
            <!-- Piel -->
            <section id="piel-acne" class="main-section" style="display:none">
                <h2>Acné</h2>
                <ul>
                    <li>Problema: Brotes, puntos negros y espinillas.</li>
                    <li>Solución: Limpieza facial, productos antiacné, consulta dermatológica.</li>
                    <li>Productos: Limpiadores, cremas y tratamientos ($5-$30).</li>
                    <li>Marcas: Neutrogena, Paula's Choice, The Ordinary, La Roche-Posay.</li>
                </ul>
            </section>
            <section id="piel-seca" class="main-section" style="display:none">
                <h2>Piel seca</h2>
                <ul>
                    <li>Problema: Sequedad, descamación, tirantez.</li>
                    <li>Solución: Hidratación, cremas nutritivas, evitar jabones agresivos.</li>
                    <li>Productos: Cremas hidratantes ($5-$20), jabones suaves.</li>
                    <li>Marcas: Cetaphil, CeraVe, L'Oréal Paris, Nivea.</li>
                </ul>
            </section>
            <section id="piel-grasosa" class="main-section" style="display:none">
                <h2>Piel grasosa</h2>
                <ul>
                    <li>Problema: Brillo, poros dilatados, tendencia al acné.</li>
                    <li>Solución: Limpieza regular, productos oil-free, exfoliación suave.</li>
                    <li>Productos: Limpiadores, tónicos, cremas oil-free ($5-$20).</li>
                    <li>Marcas: Proactiv, Neutrogena, La Roche-Posay, Dermalogica.</li>
                </ul>
            </section>
            <section id="piel-hiperpigmentacion" class="main-section" style="display:none">
                <h2>Hiperpigmentación</h2>
                <ul>
                    <li>Problema: Manchas oscuras, tono desigual.</li>
                    <li>Solución: Cremas despigmentantes, protección solar, vitamina C.</li>
                    <li>Productos: Cremas y sueros ($10-$30).</li>
                    <li>Marcas: SkinCeuticals, Obagi, Paula's Choice, The Ordinary.</li>
                </ul>
            </section>
            <section id="piel-arrugas" class="main-section" style="display:none">
                <h2>Arrugas y líneas finas</h2>
                <ul>
                    <li>Problema: Líneas de expresión, pérdida de elasticidad.</li>
                    <li>Solución: Cremas antiedad, retinoides, ácido hialurónico.</li>
                    <li>Productos: Cremas y sueros antiedad ($10-$30).</li>
                    <li>Marcas: Olay, La Roche-Posay, SkinCeuticals, Dermalogica.</li>
                </ul>
            </section>
            <section id="piel-sensibilidad" class="main-section" style="display:none">
                <h2>Sensibilidad en la piel</h2>
                <ul>
                    <li>Problema: Irritación, enrojecimiento, picor.</li>
                    <li>Solución: Productos hipoalergénicos, evitar irritantes, hidratación suave.</li>
                    <li>Productos: Cremas y limpiadores suaves ($5-$20).</li>
                    <li>Marcas: Cetaphil, La Roche-Posay, Avene, Neutrogena.</li>
                </ul>
            </section>
            <section id="piel-eccema" class="main-section" style="display:none">
                <h2>Eccema</h2>
                <ul>
                    <li>Problema: Piel inflamada, seca, con picor.</li>
                    <li>Solución: Cremas emolientes, evitar alérgenos, consulta dermatológica.</li>
                    <li>Productos: Cremas hidratantes y emolientes ($5-$20).</li>
                    <li>Marcas: Cetaphil, Eucerin, La Roche-Posay, CeraVe.</li>
                </ul>
            </section>
            <section id="piel-rosacea" class="main-section" style="display:none">
                <h2>Rosácea</h2>
                <ul>
                    <li>Problema: Enrojecimiento, vasos sanguíneos visibles.</li>
                    <li>Solución: Productos calmantes, evitar irritantes, consulta dermatológica.</li>
                    <li>Productos: Cremas y limpiadores suaves ($5-$20).</li>
                    <li>Marcas: La Roche-Posay, Cetaphil, Dermalogica, SkinCeuticals.</li>
                </ul>
            </section>
            <section id="configuracion" class="main-section" style="display:none">
                <h2>Configuración</h2>
                <div id="config-panel">
                    <h3>Editar preferencias de cuidado personal</h3>
                    <form id="edit-preferencias-form">
                        <h4>Salud física</h4>
                        <label><input type="checkbox" name="opciones" value="alimentacion"> Alimentación saludable</label><br>
                        <label><input type="checkbox" name="opciones" value="ejercicio"> Ejercicio físico</label><br>
                        <label><input type="checkbox" name="opciones" value="descanso"> Descanso y sueño</label><br>
                        <h4>Salud mental y emocional</h4>
                        <label><input type="checkbox" name="opciones" value="emocional"> Bienestar emocional</label><br>
                        <label><input type="checkbox" name="opciones" value="gestion_estres"> Gestión del estrés</label><br>
                        <h4>Higiene y autocuidado</h4>
                        <label><input type="checkbox" name="opciones" value="higiene"> Higiene personal</label><br>
                        <label><input type="checkbox" name="opciones" value="autocuidado"> Autocuidado diario</label><br>
                        <button type="submit">Guardar cambios</button>
                    </form>
                    <p id="config-msg" style="color:green;display:none;">Preferencias actualizadas.</p>
                </div>
            </section>
            <!-- Tienda personalizada -->
            <section id="tienda" class="main-section" style="display:none">
                <h2>Tienda personalizada</h2>
                <input type="text" id="busqueda-tienda" placeholder="Buscar producto..." style="width: 100%; padding: 0.5rem; border-radius: 4px; border: 1px solid #ccc; margin-bottom: 1rem;" />
                <div id="productos-tienda"></div>
            </section>
            <!-- Carrito de compras -->
            <section id="carrito" class="main-section" style="display:none">
                <h2>Carrito de compras</h2>
                <div id="carrito-lista"></div>
                <div id="carrito-total" style="margin:1rem 0;"></div>
                <button id="btn-comprar" style="display:none;">Comprar</button>
                <div id="compra-form" style="display:none; margin-top:1.5rem;">
                    <h3>Datos para la compra</h3>
                    <form id="form-compra">
                        <label>Nombre completo:<br><input type="text" id="compra-nombre" required></label><br>
                        <label>Dirección:<br><input type="text" id="compra-direccion" required></label><br>
                        <label>Email:<br><input type="email" id="compra-email" required></label><br>
                        <label>Método de pago:<br>
                            <select id="compra-pago" required>
                                <option value="tarjeta">Tarjeta de crédito/débito</option>
                                <option value="paypal">PayPal</option>
                                <option value="transferencia">Transferencia bancaria</option>
                            </select>
                        </label><br>
                        <button type="submit">Finalizar compra</button>
                    </form>
                    <div id="compra-exito" style="color:green;display:none;margin-top:1rem;">¡Compra realizada con éxito!</div>
                </div>
            </section>
            <section id="perfil" class="main-section" style="display:none">
                <h2>Perfil</h2>
                <div id="perfil-info" style="display:flex;align-items:center;gap:2rem;">
                    <div>
                        <img id="perfil-foto" src="https://ui-avatars.com/api/?name=Usuario" alt="Foto de perfil" style="width:100px;height:100px;border-radius:50%;object-fit:cover;border:2px solid #4caf50;">
                        <input type="file" id="cambiar-foto" accept="image/*" style="display:block;margin-top:0.5rem;">
                    </div>
                    <div>
                        <p><b>Usuario:</b> <span id="perfil-usuario"></span></p>
                        <p><b>Nombre:</b> <span id="perfil-nombre"></span></p>
                        <p><b>Email:</b> <span id="perfil-email"></span></p>
                    </div>
                </div>
                <div id="perfil-defectos" style="margin-top:2rem;background:#f7f7f7;padding:1rem;border-radius:8px;max-width:400px;">
                    <h3 style="margin-top:0;">Mis defectos (solo tú puedes ver esto)</h3>
                    <textarea id="defectos-text" placeholder="Escribe aquí tus defectos personales..." style="width:100%;min-height:60px;border-radius:4px;border:1px solid #ccc;padding:0.5rem;"></textarea>
                    <button id="guardar-defectos" style="margin-top:0.7rem;">Guardar</button>
                    <span id="defectos-msg" style="color:green;display:none;margin-left:1rem;">Guardado</span>
                </div>
            </section>
            <section id="feed-recomendaciones" class="main-section" style="display:none">
                <h2>Recomendaciones para ti</h2>
                <div id="recomendaciones-lista"></div>
            </section>
        </main>
        <footer>
            <p>&copy; 2025 florecer</p>
        </footer>
    </div>
    <script>
    // Autenticación simple con localStorage
    const authContainer = document.getElementById('auth-container');
    const mainContent = document.getElementById('main-content');
    const loginForm = document.getElementById('login-form');
    const registerForm = document.getElementById('register-form');
    const showRegister = document.getElementById('show-register');
    const showLogin = document.getElementById('show-login');
    const loginError = document.getElementById('login-error');
    const registerError = document.getElementById('register-error');
    const personalizaPanel = document.getElementById('personaliza-panel');
    const continuarBtn = document.getElementById('continuar-btn');
    const registerFormEl = document.querySelector('#register-form form');

    // Mostrar registro
    showRegister.onclick = function(e) {
        e.preventDefault();
        loginForm.style.display = 'none';
        registerForm.style.display = 'block';
        loginError.style.display = 'none';
    };
    // Mostrar login
    showLogin.onclick = function(e) {
        e.preventDefault();
        registerForm.style.display = 'none';
        loginForm.style.display = 'block';
        registerError.style.display = 'none';
    };
    // Guardar usuario
    registerFormEl.onsubmit = function(e) {
        e.preventDefault();
        // Permitir registro sin datos reales durante 2 minutos
        const testMode = localStorage.getItem('test_registro') === 'true';
        const ahora = Date.now();
        const testExpira = parseInt(localStorage.getItem('test_registro_expira') || '0');
        if (!testMode || ahora > testExpira) {
            // Activar modo test por 2 minutos
            localStorage.setItem('test_registro', 'true');
            localStorage.setItem('test_registro_expira', (ahora + 2*60*1000).toString());
        }
        if (localStorage.getItem('test_registro') === 'true' && Date.now() < parseInt(localStorage.getItem('test_registro_expira'))) {
            // Rellenar datos falsos si están vacíos
            const nombre = document.getElementById('register-nombre').value || 'Test';
            const apellidos = document.getElementById('register-apellidos').value || 'Usuario';
            const usuario = document.getElementById('register-user').value || 'testuser' + Math.floor(Math.random()*10000);
            const email = document.getElementById('register-email').value || 'test'+Math.floor(Math.random()*10000)+'@mail.com';
            const password = document.getElementById('register-password').value || '1234';
            const password2 = document.getElementById('register-password2').value || '1234';
            if(password !== password2) {
                document.getElementById('register-error').textContent = 'Las contraseñas no coinciden.';
                document.getElementById('register-error').style.display = 'block';
                return;
            }
            if(localStorage.getItem('user_' + usuario)) {
                document.getElementById('register-error').textContent = 'El usuario ya existe.';
                document.getElementById('register-error').style.display = 'block';
                return;
            }
            localStorage.setItem('user_' + usuario, JSON.stringify({nombre, apellidos, usuario, email, password}));
            document.getElementById('register-error').style.display = 'none';
            document.getElementById('register-form').style.display = 'none';
            personalizaPanel.style.display = 'block';
            return;
        }
        // ...registro normal...
        const nombre = document.getElementById('register-nombre').value;
        const apellidos = document.getElementById('register-apellidos').value;
        const usuario = document.getElementById('register-user').value;
        const email = document.getElementById('register-email').value;
        const password = document.getElementById('register-password').value;
        const password2 = document.getElementById('register-password2').value;
        if(password !== password2) {
            document.getElementById('register-error').textContent = 'Las contraseñas no coinciden.';
            document.getElementById('register-error').style.display = 'block';
            return;
        }
        if(localStorage.getItem('user_' + usuario)) {
            document.getElementById('register-error').textContent = 'El usuario ya existe.';
            document.getElementById('register-error').style.display = 'block';
            return;
        }
        localStorage.setItem('user_' + usuario, JSON.stringify({nombre, apellidos, usuario, email, password}));
        document.getElementById('register-error').style.display = 'none';
        document.getElementById('register-form').style.display = 'none';
        personalizaPanel.style.display = 'block';
    };
    // Guardar preferencias por categoría
    personalizaPanel.querySelector('form').onsubmit = function(e) {
        e.preventDefault();
        const usuario = document.getElementById('register-user').value;
        const nutricion = Array.from(document.querySelectorAll('input[name="nutricion"]:checked')).map(cb => cb.value);
        const cabello = Array.from(document.querySelectorAll('input[name="cabello"]:checked')).map(cb => cb.value);
        const piel = Array.from(document.querySelectorAll('input[name="piel"]:checked')).map(cb => cb.value);
        const tipoPiel = document.querySelector('input[name="tipo_piel"]:checked')?.value || '';
        let userData = JSON.parse(localStorage.getItem('user_' + usuario));
        userData.nutricion = nutricion;
        userData.cabello = cabello;
        userData.piel = piel;
        userData.tipoPiel = tipoPiel;
        localStorage.setItem('user_' + usuario, JSON.stringify(userData));
        personalizaPanel.style.display = 'none';
        document.getElementById('auth-container').style.display = 'none';
        document.getElementById('main-content').style.display = 'block';
        setLoggedIn(usuario);
        mostrarContenidoPersonalizado(userData);
    };
    // Mostrar contenido personalizado según categorías
    function mostrarContenidoPersonalizado(userData) {
        // Oculta todas las secciones
        document.querySelectorAll('.main-section').forEach(sec => sec.style.display = 'none');
        // Nutrición
        if(userData.nutricion) {
            userData.nutricion.forEach(tipo => {
                const sec = document.getElementById('nutricion-' + tipo);
                if(sec) sec.style.display = 'block';
            });
        }
        // Cabello
        if(userData.cabello) {
            userData.cabello.forEach(tipo => {
                const sec = document.getElementById('cabello-' + tipo);
                if(sec) sec.style.display = 'block';
            });
        }
        // Piel
        if(userData.piel) {
            userData.piel.forEach(tipo => {
                const sec = document.getElementById('piel-' + tipo);
                if(sec) sec.style.display = 'block';
            });
        }
        // Si no seleccionó nada, mostrar inicio por defecto
        if((!userData.nutricion || userData.nutricion.length === 0) && (!userData.cabello || userData.cabello.length === 0) && (!userData.piel || userData.piel.length === 0)) {
            document.getElementById('inicio').style.display = 'block';
        }
    }
    // Iniciar sesión
    loginForm.querySelector('form').onsubmit = function(e) {
        e.preventDefault();
        const userInput = document.getElementById('login-user').value.trim();
        const password = document.getElementById('login-password').value;
        const keepLogged = document.getElementById('keep-logged').checked;
        let usuario = null;
        // Buscar por usuario o email
        for(let key in localStorage) {
            if(key.startsWith('user_')) {
                const data = JSON.parse(localStorage.getItem(key));
                if(data && (data.usuario === userInput || data.email === userInput)) {
                    usuario = data.usuario;
                    if(data.password !== password) usuario = null;
                    break;
                }
            }
        }
        if(usuario) {
            loginError.style.display = 'none';
            authContainer.style.display = 'none';
            mainContent.style.display = 'block';
            if(keepLogged) {
                localStorage.setItem('keepLogged', 'true');
                setLoggedIn(usuario);
            } else {
                localStorage.removeItem('keepLogged');
                setLoggedIn(usuario);
            }
        } else {
            loginError.textContent = 'Usuario, email o contraseña incorrectos.';
            loginError.style.display = 'block';
        }
    };
    // Al cargar, si keepLogged está activo, mostrar página principal
    window.onload = function() {
        const keepLogged = localStorage.getItem('keepLogged') === 'true';
        const loggedUser = localStorage.getItem('loggedUser');
        if(keepLogged && loggedUser && localStorage.getItem('user_' + loggedUser)) {
            authContainer.style.display = 'none';
            mainContent.style.display = 'block';
        }
    };
    // Guardar estado de login
    function setLoggedIn(usuario) {
        localStorage.setItem('loggedIn', 'true');
        localStorage.setItem('loggedUser', usuario);
    }
    // Menú lateral desplegable
    const menuBtn = document.getElementById('menuBtn');
    const sideMenu = document.getElementById('sideMenu');
    const sideLinks = document.querySelectorAll('.side-link');
    const sections = document.querySelectorAll('.main-section');
    let menuVisible = false;
    menuBtn.addEventListener('click', function(e) {
        e.stopPropagation();
        menuVisible = !menuVisible;
        sideMenu.classList.toggle('show', menuVisible);
    });
    document.addEventListener('click', function(e) {
        if (menuVisible && !sideMenu.contains(e.target) && e.target !== menuBtn) {
            sideMenu.classList.remove('show');
            menuVisible = false;
        }
    });
    sideLinks.forEach(btn => {
        btn.addEventListener('click', function() {
            sections.forEach(sec => sec.style.display = 'none');
            document.getElementById(this.dataset.section).style.display = 'block';
            sideMenu.classList.remove('show');
            menuVisible = false;
        });
    });
    // Mostrar preferencias actuales en configuración
    function cargarPreferenciasConfiguracion() {
        const usuario = localStorage.getItem('loggedUser');
        if (!usuario) return;
        const userData = JSON.parse(localStorage.getItem('user_' + usuario));
        if (!userData || !userData.opciones) return;
        const form = document.getElementById('edit-preferencias-form');
        form.querySelectorAll('input[name="opciones"]').forEach(cb => {
            cb.checked = userData.opciones.includes(cb.value);
        });
    }
    // Guardar cambios de preferencias
    const editForm = document.getElementById('edit-preferencias-form');
    if(editForm) {
        editForm.onsubmit = function(e) {
            e.preventDefault();
            const usuario = localStorage.getItem('loggedUser');
            let userData = JSON.parse(localStorage.getItem('user_' + usuario));
            const opciones = Array.from(editForm.querySelectorAll('input[name="opciones"]:checked')).map(cb => cb.value);
            userData.opciones = opciones;
            localStorage.setItem('user_' + usuario, JSON.stringify(userData));
            document.getElementById('config-msg').style.display = 'block';
            mostrarContenidoPersonalizado(opciones);
            setTimeout(()=>{
                document.getElementById('config-msg').style.display = 'none';
            }, 2000);
        };
    }
    // Cuando se muestre la sección configuración, cargar preferencias
    const configSection = document.getElementById('configuracion');
    if(configSection) {
        const observer = new MutationObserver(() => {
            if (configSection.style.display === 'block') {
                cargarPreferenciasConfiguracion();
            }
        });
        observer.observe(configSection, { attributes: true, attributeFilter: ['style'] });
    }
    // --- Datos de productos personalizados ---
    const productosTienda = [
        // Nutrición
        {categoria: 'nutricion', sub: 'deficiencias', nombre: 'Centrum Multivitamínico', precio: 15, marca: 'Centrum', descripcion: 'Suplemento vitamínico y mineral para cubrir deficiencias.', id: 'cent1'},
        {categoria: 'nutricion', sub: 'deficiencias', nombre: 'Ensure Nutrición Enteral', precio: 30, marca: 'Ensure', descripcion: 'Bebida nutricional para necesidades especiales.', id: 'ens1'},
        {categoria: 'nutricion', sub: 'sobrepeso', nombre: 'SlimFast Batido', precio: 20, marca: 'SlimFast', descripcion: 'Batido para control de peso y nutrición equilibrada.', id: 'slim1'},
        // Cabello
        {categoria: 'cabello', sub: 'caida', nombre: 'Nioxin Shampoo', precio: 25, marca: 'Nioxin', descripcion: 'Champú para fortalecer y estimular el crecimiento del cabello.', id: 'niox1'},
        {categoria: 'cabello', sub: 'caspa', nombre: 'Head & Shoulders Anticaspa', precio: 12, marca: 'Head & Shoulders', descripcion: 'Champú para eliminar la caspa y aliviar la picazón.', id: 'hs1'},
        {categoria: 'cabello', sub: 'seco', nombre: 'Moroccanoil Mascarilla', precio: 22, marca: 'Moroccanoil', descripcion: 'Mascarilla hidratante para cabello seco y dañado.', id: 'moro1'},
        // ...agrega más productos según lo personalizado...
    ];
    // --- Mostrar productos personalizados según usuario ---
    function mostrarTiendaPersonalizada(userData) {
        document.querySelectorAll('.main-section').forEach(sec => sec.style.display = 'none');
        document.getElementById('tienda').style.display = 'block';
        const cont = document.getElementById('productos-tienda');
        cont.innerHTML = '';
        let productos = [];
        if(userData.nutricion) {
            userData.nutricion.forEach(sub => {
                productos = productos.concat(productosTienda.filter(p => p.categoria==='nutricion' && p.sub===sub));
            });
        }
        if(userData.cabello) {
            userData.cabello.forEach(sub => {
                productos = productos.concat(productosTienda.filter(p => p.categoria==='cabello' && p.sub===sub));
            });
        }
        if(productos.length === 0) {
            cont.innerHTML = '<p>No hay productos personalizados para tus preferencias.</p>';
        } else {
            productos.forEach(prod => {
                cont.innerHTML += renderProducto(prod);
            });
        }
        cargarResenas();
    }
    // --- Carrito de compras ---
    let carrito = JSON.parse(localStorage.getItem('carrito') || '[]');
    function renderCarrito() {
        document.querySelectorAll('.main-section').forEach(sec => sec.style.display = 'none');
        document.getElementById('carrito').style.display = 'block';
        const lista = document.getElementById('carrito-lista');
        if(carrito.length === 0) {
            lista.innerHTML = '<p>Tu carrito está vacío.</p>';
            document.getElementById('carrito-total').textContent = '';
            document.getElementById('btn-comprar').style.display = 'none';
            return;
        }
        lista.innerHTML = carrito.map((item, i) =>
            `<div class="carrito-item">
                <b>${item.nombre}</b> (${item.marca}) - $${item.precio} <button onclick="eliminarDelCarrito(${i})">Eliminar</button>
            </div>`
        ).join('');
        const total = carrito.reduce((sum, item) => sum + item.precio, 0);
        document.getElementById('carrito-total').textContent = 'Total: $' + total;
        document.getElementById('btn-comprar').style.display = 'inline-block';
    }
    function eliminarDelCarrito(idx) {
        carrito.splice(idx, 1);
        localStorage.setItem('carrito', JSON.stringify(carrito));
        renderCarrito();
    }
    // --- Añadir a carrito desde tienda ---
    function agregarAlCarrito(prod) {
        carrito.push(prod);
        localStorage.setItem('carrito', JSON.stringify(carrito));
        alert('Producto añadido al carrito');
    }
    // Modificar renderProducto para añadir botón de carrito
    function renderProducto(prod) {
        return `<div class="producto" data-id="${prod.id}">
            <h3>${prod.nombre} <span style="font-size:0.9em;color:#888;">(${prod.marca})</span></h3>
            <p>${prod.descripcion}</p>
            <p><b>Precio:</b> $${prod.precio}</p>
            <button class="btn-carrito">Añadir al carrito</button>
            <div class="calificacion">
                <span>Califica:</span> ${[1,2,3,4,5].map(n=>`<span class="estrella" data-valor="${n}">&#9733;</span>`).join('')}
                <span class="promedio"></span>
            </div>
            <div class="resenas">
                <h4>Reseñas</h4>
                <div class="lista-resenas"></div>
                <textarea class="nueva-resena" placeholder="Escribe tu reseña..."></textarea>
                <button class="btn-resena">Enviar reseña</button>
            </div>
        </div><hr>`;
    }
    // Delegar evento para añadir al carrito
    function cargarResenas() {
        document.querySelectorAll('.producto').forEach(prodDiv => {
            const id = prodDiv.dataset.id;
            // Calificación
            const estrellas = prodDiv.querySelectorAll('.estrella');
            const promedioSpan = prodDiv.querySelector('.promedio');
            let calificaciones = JSON.parse(localStorage.getItem('calif_' + id) || '[]');
            let promedio = calificaciones.length ? (calificaciones.reduce((a,b)=>a+b,0)/calificaciones.length).toFixed(1) : '-';
            promedioSpan.textContent = `(${promedio}/5)`;
            estrellas.forEach((star, idx) => {
                star.onclick = function() {
                    calificaciones.push(idx+1);
                    localStorage.setItem('calif_' + id, JSON.stringify(calificaciones));
                    cargarResenas();
                };
            });
            // Reseñas
            const lista = prodDiv.querySelector('.lista-resenas');
            let resenas = JSON.parse(localStorage.getItem('resenas_' + id) || '[]');
            lista.innerHTML = resenas.map(r => `<div class="resena">${r}</div>`).join('');
            prodDiv.querySelector('.btn-resena').onclick = function() {
                const txt = prodDiv.querySelector('.nueva-resena').value.trim();
                if(txt) {
                    resenas.push(txt);
                    localStorage.setItem('resenas_' + id, JSON.stringify(resenas));
                    cargarResenas();
                }
            };
            // Añadir al carrito
            prodDiv.querySelector('.btn-carrito').onclick = function() {
                const prod = productosTienda.find(p => p.id === id);
                agregarAlCarrito(prod);
            };
        });
    }
    // --- Comprar ---
    document.getElementById('btn-comprar').onclick = function() {
        document.getElementById('compra-form').style.display = 'block';
    };
    document.getElementById('form-compra').onsubmit = function(e) {
        e.preventDefault();
        carrito = [];
        localStorage.setItem('carrito', '[]');
        renderCarrito();
        document.getElementById('compra-exito').style.display = 'block';
        setTimeout(()=>{
            document.getElementById('compra-exito').style.display = 'none';
            document.getElementById('compra-form').style.display = 'none';
        }, 2000);
    };
    // --- Acceso a carrito desde menú ---
    document.querySelectorAll('.side-link').forEach(btn => {
        if(btn.dataset.section === 'carrito') {
            btn.addEventListener('click', function() {
                renderCarrito();
            });
        }
    });
    // --- Bienvenida usuario ---
    function mostrarBienvenidaUsuario() {
        const usuario = localStorage.getItem('loggedUser');
        if (!usuario) return;
        const userData = JSON.parse(localStorage.getItem('user_' + usuario));
        if (userData && userData.nombre) {
            document.getElementById('bienvenida-usuario').innerHTML = `¡Bienvenido/a, <span style="color:#388e3c;">${userData.nombre}</span>!`;
        } else {
            document.getElementById('bienvenida-usuario').textContent = 'Inicio';
        }
    }
    // Llamar al mostrarBienvenidaUsuario cuando se muestre la sección de inicio
    const inicioSection = document.getElementById('inicio');
    if(inicioSection) {
        const observerInicio = new MutationObserver(() => {
            if (inicioSection.style.display === 'block') {
                mostrarBienvenidaUsuario();
            }
        });
        observerInicio.observe(inicioSection, { attributes: true, attributeFilter: ['style'] });
    }
    // --- Cargar perfil ---
    function cargarPerfil() {
        const usuario = localStorage.getItem('loggedUser');
        if (!usuario) return;
        const userData = JSON.parse(localStorage.getItem('user_' + usuario));
        document.getElementById('perfil-usuario').textContent = userData.usuario || '';
        document.getElementById('perfil-nombre').textContent = userData.nombre || '';
        document.getElementById('perfil-email').textContent = userData.email || '';
        // Foto de perfil
        const foto = userData.fotoPerfil || `https://ui-avatars.com/api/?name=${encodeURIComponent(userData.nombre||userData.usuario)}`;
        document.getElementById('perfil-foto').src = foto;
        // Defectos personales (solo local)
        document.getElementById('defectos-text').value = userData.defectos || '';
    }
    // Guardar defectos
    const defectosBtn = document.getElementById('guardar-defectos');
    if(defectosBtn) {
        defectosBtn.onclick = function() {
            const usuario = localStorage.getItem('loggedUser');
            let userData = JSON.parse(localStorage.getItem('user_' + usuario));
            userData.defectos = document.getElementById('defectos-text').value;
            localStorage.setItem('user_' + usuario, JSON.stringify(userData));
            document.getElementById('defectos-msg').style.display = 'inline';
            setTimeout(()=>{
                document.getElementById('defectos-msg').style.display = 'none';
            }, 1500);
        };
    }
    // Cambiar foto de perfil
    const cambiarFoto = document.getElementById('cambiar-foto');
    if(cambiarFoto) {
        cambiarFoto.onchange = function(e) {
            const file = e.target.files[0];
            if(file) {
                const reader = new FileReader();
                reader.onload = function(evt) {
                    document.getElementById('perfil-foto').src = evt.target.result;
                    const usuario = localStorage.getItem('loggedUser');
                    let userData = JSON.parse(localStorage.getItem('user_' + usuario));
                    userData.fotoPerfil = evt.target.result;
                    localStorage.setItem('user_' + usuario, JSON.stringify(userData));
                };
                reader.readAsDataURL(file);
            }
        };
    }
    // Mostrar perfil al entrar en la sección
    const perfilSection = document.getElementById('perfil');
    if(perfilSection) {
        const observerPerfil = new MutationObserver(() => {
            if (perfilSection.style.display === 'block') {
                cargarPerfil();
            }
        });
        observerPerfil.observe(perfilSection, { attributes: true, attributeFilter: ['style'] });
    }
    // Mostrar recomendaciones en el feed según selección personalizada
    function mostrarFeedRecomendaciones(userData) {
        document.querySelectorAll('.main-section').forEach(sec => sec.style.display = 'none');
        document.getElementById('feed-recomendaciones').style.display = 'block';
        const lista = document.getElementById('recomendaciones-lista');
        let recomendaciones = [];
        // Nutrición
        if(userData.nutricion) {
            if(userData.nutricion.includes('deficiencias')) recomendaciones.push('Incluye más frutas, verduras y proteínas magras en tu dieta diaria.');
            if(userData.nutricion.includes('sobrepeso')) recomendaciones.push('Haz ejercicio regularmente y controla las porciones de tus comidas.');
            if(userData.nutricion.includes('desnutricion')) recomendaciones.push('Consulta a un nutricionista para un plan alimenticio personalizado.');
            if(userData.nutricion.includes('alergias')) recomendaciones.push('Lee siempre las etiquetas de los alimentos y evita los alérgenos.');
            if(userData.nutricion.includes('intolerancias')) recomendaciones.push('Prueba una dieta de eliminación para identificar alimentos problemáticos.');
            if(userData.nutricion.includes('deshidratacion')) recomendaciones.push('Bebe agua frecuentemente y consume frutas hidratantes.');
            if(userData.nutricion.includes('digestivos')) recomendaciones.push('Incluye fibra y probióticos en tu dieta para mejorar la digestión.');
        }
        // Cabello
        if(userData.cabello) {
            if(userData.cabello.includes('caida')) recomendaciones.push('Reduce el estrés y usa productos que fortalezcan el cabello.');
            if(userData.cabello.includes('seco')) recomendaciones.push('Utiliza mascarillas hidratantes y evita el calor excesivo.');
            if(userData.cabello.includes('grasoso')) recomendaciones.push('Lava tu cabello con productos específicos para controlar el sebo.');
            if(userData.cabello.includes('caspa')) recomendaciones.push('Usa champús anticaspa y mantén una buena higiene.');
            if(userData.cabello.includes('calor')) recomendaciones.push('Protege tu cabello antes de usar planchas o secadores.');
            if(userData.cabello.includes('tenido')) recomendaciones.push('Usa productos especiales para cabello teñido y evita lavados frecuentes.');
            if(userData.cabello.includes('encrespado')) recomendaciones.push('Aplica aceites naturales y productos anti-frizz.');
            if(userData.cabello.includes('alopecia')) recomendaciones.push('Consulta a un especialista para un tratamiento adecuado.');
        }
        // Piel
        if(userData.piel) {
            if(userData.piel.includes('acne')) recomendaciones.push('Limpia tu rostro dos veces al día y usa productos antiacné.');
            if(userData.piel.includes('seca')) recomendaciones.push('Hidrata tu piel con cremas nutritivas y evita jabones agresivos.');
            if(userData.piel.includes('grasosa')) recomendaciones.push('Usa productos oil-free y realiza exfoliaciones suaves.');
            if(userData.piel.includes('hiperpigmentacion')) recomendaciones.push('Aplica protector solar y productos con vitamina C.');
            if(userData.piel.includes('arrugas')) recomendaciones.push('Utiliza cremas antiedad y productos con retinoides.');
            if(userData.piel.includes('sensibilidad')) recomendaciones.push('Prefiere productos hipoalergénicos y sin fragancia.');
            if(userData.piel.includes('eccema')) recomendaciones.push('Usa cremas emolientes y evita alérgenos.');
            if(userData.piel.includes('rosacea')) recomendaciones.push('Evita irritantes y consulta a un dermatólogo.');
        }
        // Tipo de piel
        if(userData.tipoPiel) {
            recomendaciones.push('Tu tipo de piel es: ' + userData.tipoPiel.charAt(0).toUpperCase() + userData.tipoPiel.slice(1));
        }
        if(recomendaciones.length === 0) {
            lista.innerHTML = '<p>No hay recomendaciones personalizadas. Selecciona tus opciones en el registro.</p>';
        } else {
            lista.innerHTML = recomendaciones.map(r => `<div class="reco">${r}</div>`).join('');
        }
    }
    // Mostrar recomendaciones al entrar en el feed
    const feedSection = document.getElementById('feed-recomendaciones');
    if(feedSection) {
        const observerFeed = new MutationObserver(() => {
            if (feedSection.style.display === 'block') {
                const usuario = localStorage.getItem('loggedUser');
                const userData = JSON.parse(localStorage.getItem('user_' + usuario));
                mostrarFeedRecomendaciones(userData);
            }
        });
        observerFeed.observe(feedSection, { attributes: true, attributeFilter: ['style'] });
    }
    // Buscador global para tienda y opciones
    function mostrarBuscadorGlobal() {
        document.querySelectorAll('.main-section').forEach(sec => sec.style.display = 'none');
        document.getElementById('tienda').style.display = 'block';
        document.getElementById('busqueda-tienda').value = '';
        document.getElementById('busqueda-tienda').placeholder = 'Buscar por piel, cabello, nutrición, producto, etc...';
        // Mostrar todos los productos sin filtrar por personalización
        const cont = document.getElementById('productos-tienda');
        cont.innerHTML = '';
        productosTienda.forEach(prod => {
            cont.innerHTML += renderProducto(prod);
        });
        cargarResenas();
    }
    // Acceso al buscador global desde menú
    if(!document.getElementById('btn-busqueda-global')) {
        const btn = document.createElement('button');
        btn.id = 'btn-busqueda-global';
        btn.textContent = 'Buscador';
        btn.className = 'side-link';
        btn.dataset.section = 'buscador';
        document.querySelector('.main-nav ul').appendChild(btn);
        btn.onclick = mostrarBuscadorGlobal;
    }
    document.getElementById('busqueda-tienda').addEventListener('input', function() {
        const val = this.value.toLowerCase();
        document.querySelectorAll('.producto').forEach(div => {
            div.style.display = div.textContent.toLowerCase().includes(val) ? '' : 'none';
        });
    });
    </script>
</body>
</html>
